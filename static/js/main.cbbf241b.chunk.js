(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{12:function(e,t,c){},13:function(e,t,c){},16:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),s=c(7),r=c.n(s),i=(c(12),c(2)),o=(c(13),c(0)),l=function(e){var t=new Date(e.dt);return Object(o.jsx)("div",{className:"weatherCard",children:Object(o.jsxs)("div",{className:"weatherCard-container",children:[Object(o.jsx)("section",{className:"weatherCard-date-container",children:Object(o.jsx)("span",{className:"weatherCard-date",children:"".concat(t.getDate()," ").concat({0:"jan",1:"feb",2:"mar",3:"apr",4:"may",5:"jun",6:"jul",7:"aug",8:"sep",9:"oct",10:"nov",11:"dec"}[t.getMonth()]," ").concat(t.getFullYear())})}),Object(o.jsx)("section",{className:"weatherCard-icon-container",children:Object(o.jsx)("span",{className:"weatherCard-icon-wrapper",children:Object(o.jsx)("img",{className:"weatherCard-icon",src:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ICON_URL,"/").concat(e.icon,"@2x.png")})})}),Object(o.jsx)("section",{className:"weatherCard-temp-container",children:Object(o.jsx)("h1",{className:"weatherCard-temp",children:+e.temp>0?"+".concat(Math.round(+e.temp),"\xb0"):"-".concat(Math.round(+e.temp),"\xb0")})})]})})},d=function(e){return Object(o.jsx)("div",{className:"weatherForecast",children:Object(o.jsxs)("div",{className:"weatherForecast-container",children:[Object(o.jsx)(l,{dt:1e3*e.dates[0].dt,temp:e.dates[0].temp.day,icon:e.dates[0].weather[0].icon}),Object(o.jsx)(l,{dt:1e3*e.dates[1].dt,temp:e.dates[1].temp.day,icon:e.dates[1].weather[0].icon}),Object(o.jsx)(l,{dt:1e3*e.dates[2].dt,temp:e.dates[2].temp.day,icon:e.dates[2].weather[0].icon}),Object(o.jsx)(l,{dt:1e3*e.dates[3].dt,temp:e.dates[3].temp.day,icon:e.dates[3].weather[0].icon}),Object(o.jsx)(l,{dt:1e3*e.dates[4].dt,temp:e.dates[4].temp.day,icon:e.dates[4].weather[0].icon}),Object(o.jsx)(l,{dt:1e3*e.dates[5].dt,temp:e.dates[5].temp.day,icon:e.dates[5].weather[0].icon}),Object(o.jsx)(l,{dt:1e3*e.dates[6].dt,temp:e.dates[6].temp.day,icon:e.dates[6].weather[0].icon})]})})},j=c(3),h=function(e){var t=[];for(var c in e.cities)"empty"!==c&&t.push(c);return Object(o.jsxs)("select",{className:"citySelector",onChange:function(t){return e.handleChange(t.target.value)},children:[Object(o.jsx)("option",{value:"empty",selected:!0,disabled:!0,hidden:!0,children:"Select city"}),t.map((function(e){return Object(o.jsx)("option",{className:"citySelector-value",value:e,children:e},e)}))]})},O=c(4),u=c.n(O),p=c(5),b=function(e){var t=Object(a.useState)(null),c=Object(i.a)(t,2),n=c[0],s=c[1],r=Object(a.useState)(null),o=Object(i.a)(r,2),l=o[0],d=o[1],j=Object(a.useState)(!1),h=Object(i.a)(j,2),O=h[0],b=h[1],m=Object(a.useState)(e),f=Object(i.a)(m,2),x=f[0],S=f[1];return Object(a.useEffect)((function(){x&&(b(!0),s(null),d(null),function(){var e=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(x).then((function(e){return e.json()})).then((function(e){b(!1),e.cod>=400?d(e.message):s(e)})).catch((function(e){b(!1),d(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()())}),[x]),{forecast:n,forecastError:l,isForecastLoading:O,setForecastUrl:S}},m=function(e){var t=Object(a.useState)(null),c=Object(i.a)(t,2),n=c[0],s=c[1],r=Object(a.useState)(null),o=Object(i.a)(r,2),l=o[0],d=o[1],j=Object(a.useState)(!1),h=Object(i.a)(j,2),O=h[0],b=h[1],m=Object(a.useState)(e),f=Object(i.a)(m,2),x=f[0],S=f[1];return Object(a.useEffect)((function(){x&&(b(!0),s(null),d(null),function(){var e=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(x).then((function(e){return e.json()})).then((function(e){b(!1),e.cod>=400?d(e.message):s(e)})).catch((function(e){b(!1),d(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()())}),[x]),{history:n,historyError:l,isHistoryLoading:O,setHistoryUrl:S}},f=c.p+"static/media/placeholder.c93ab75c.svg",x=function(){return Object(o.jsxs)("section",{className:"placeholder-wrapper",children:[Object(o.jsx)("span",{className:"placeholder-image-wrapper",children:Object(o.jsx)("img",{className:"placeholder-image",alt:"placholder-image",src:f})}),Object(o.jsx)("span",{className:"placeholder-text",children:"Fill in all the fields and the weather will be displayed"})]})};var S=function(){var e=Object(a.useState)(NaN),t=Object(i.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)("emptyCity"),r=Object(i.a)(s,2),O=r[0],u=r[1],p=new Date(Date.now()).toLocaleDateString().split(".").reverse().join("-"),f=new Date(Date.now()-3456e5).toLocaleDateString().split(".").reverse().join("-"),S=b(""),N=S.forecast,_=S.forecastError,E=S.isForecastLoading,w=S.setForecastUrl,C=m(""),v=C.history,T=C.historyError,y=C.isHistoryLoading,g=C.setHistoryUrl,D=function(e,t){g("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_PAST_URL,"lat=").concat(j[e].lat,"&lon=").concat(j[e].lon,"&dt=").concat(t/1e3,"&units=metric&appid=").concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_KEY))};return Object(a.useEffect)((function(){"emptyCity"===O||isNaN(c)||D(O,c)}),[c]),Object(a.useEffect)((function(){"emptyCity"===O||isNaN(c)||D(O,c)}),[O]),Object(o.jsx)("div",{className:"App",children:Object(o.jsxs)("div",{className:"app-container",children:[Object(o.jsxs)("header",{className:"header",children:[Object(o.jsx)("span",{className:"header-title-left",children:Object(o.jsx)("h1",{className:"header-title",children:"Weather"})}),Object(o.jsx)("span",{className:"header-title-right",children:Object(o.jsx)("h1",{className:"header-title",children:"forecast"})})]}),Object(o.jsxs)("main",{className:"container",children:[Object(o.jsxs)("section",{className:"weather-section forecast",children:[Object(o.jsx)("span",{className:"weather-section-title-wrapper",children:Object(o.jsx)("h2",{className:"weather-section-title",children:"7 Days Forecast"})}),Object(o.jsx)("span",{className:"selector-wrapper",children:Object(o.jsx)(h,{cities:j,handleChange:function(e){w("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,"lat=").concat(j[e].lat,"&lon=").concat(j[e].lon,"&exclude=current,minutely,hourly,alerts&units=metric&APPID=").concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_KEY))}})}),Object(o.jsx)("div",{className:"weather-section-forecast-content",children:_?Object(o.jsxs)("h2",{children:["Error when fetching: ",_]}):!N&&E?Object(o.jsx)("h2",{children:"LOADING..."}):N?Object(o.jsx)(d,{dates:N.daily}):Object(o.jsx)(x,{})})]}),Object(o.jsxs)("section",{className:"weather-section history",children:[Object(o.jsx)("span",{className:"weather-section-title-wrapper",children:Object(o.jsx)("h2",{className:"weather-section-title",children:"Forecast for a Date in the Past"})}),Object(o.jsxs)("span",{className:"selector-wrapper",children:[Object(o.jsx)(h,{cities:j,handleChange:function(e){u(e)}}),Object(o.jsx)("input",{className:"dateSelector",type:"date",min:f,max:p,onChange:function(e){return function(e){n(new Date(e).getTime())}(e.target.value)}})]}),Object(o.jsx)("div",{className:"weather-section-history-content",children:T?Object(o.jsxs)("h2",{children:["Error when fetching: ",T]}):!v&&y?Object(o.jsx)("h2",{children:"LOADING..."}):!v||"emptyCity"===O||isNaN(c)?Object(o.jsx)(x,{}):(console.log(v),Object(o.jsx)(l,{dt:1e3*v.current.dt,temp:v.current.temp,icon:v.current.weather[0].icon}))})]})]}),Object(o.jsx)("footer",{className:"footer",children:Object(o.jsx)("span",{className:"footer-title",children:"\u0421 \u041b\u042e\u0411\u041e\u0412\u042c\u042e \u041e\u0422 MERCURY DEVELOPMENT"})})]})})},N=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,17)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),a(e),n(e),s(e),r(e)}))};r.a.render(Object(o.jsx)(n.a.StrictMode,{children:Object(o.jsx)(S,{})}),document.getElementById("root")),N()},3:function(e){e.exports=JSON.parse('{"Samara":{"lat":53.195873,"lon":50.100193},"Tolyatti":{"lat":53.507836,"lon":49.420393},"Saratov":{"lat":51.533557,"lon":46.034257},"Kazan":{"lat":55.796127,"lon":49.106405},"Krasnodar":{"lat":45.03547,"lon":38.975313},"empty":{"lat":0,"lon":0}}')}},[[16,1,2]]]);
//# sourceMappingURL=main.cbbf241b.chunk.js.map